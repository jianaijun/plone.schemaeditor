<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="plone">

<head tal:define="portal_url context/@@plone_portal_state/portal_url">
<metal:block fill-slot="top_slot">

<tal:defines define="dummy python:request.set('disable_border',1);
                     disable_column_one python:request.set('disable_plone.leftcolumn',1);
                     disable_column_two python:request.set('disable_plone.rightcolumn',1);"/>

</metal:block>

<metal:block fill-slot="head_slot">

<link href="++resource++modeleditor.css"
    media="screen"
    type="text/css"
    rel="stylesheet"
    tal:attributes="href string:${portal_url}/++resource++plone.schemaeditor.modeleditor.css"
    />

<script src="++resource++plone.app.jquery.js"
    type="text/javascript"
    tal:attributes="src string:${portal_url}/++resource++plone.app.jquery.js"
    ></script>
<script src="++resource++plone.resourceeditor/ace/ace.js"
    type="text/javascript"
    charset="utf-8"
    tal:attributes="src string:${portal_url}/++resource++plone.resourceeditor/ace/ace.js"
    ></script>
<script src="++resource++plone.schemaeditor/modeleditor.js"
    type="text/javascript"
    charset="utf-8"
    tal:attributes="src string:${portal_url}/++resource++plone.schemaeditor.modeleditor.js"
    ></script>

</metal:block>
</head>

<body>
<div metal:fill-slot="content" class="documentEditable" id="themeMapper">

    <div id="content">

        <div id="page-intro">

            <h1 class="documentFirstHeading"
                i18n:translate="heading_model_edit">Edit model for
                <span i18n:name="name" tal:content="context/Title">name</span>
            </h1>

            <a href=""
                class="link-parent"
                tal:attributes="href string:${context/absolute_url}/@@fields"
                i18n:translate="label_up_to_schemaeditor">
                    Back to the schema editor
            </a>

        </div>

        <div id="rules-editor">

            <div class="portalMessage info">
              <span id="messagespan" style="display:none">
                &nbsp;
              </span>&nbsp;
            </div>

            <form id="saveform"
                tal:attributes="action string:${context/absolute_url}/@@model-edit-save"
                tal:define="authenticator context/@@authenticator/authenticator | nothing">
                <input tal:replace="structure authenticator" />
                <input type="hidden" id="savesource" name="source" value="" />
                <div class="formControls">
                    <input class="context" type="submit" name="form.button.save" value="Save" disabled="disabled" />
                </div>
            </form>

            <div id="modelEditor" tal:content="view/modelSource" />
        </div>

    </div>

</div>
</body>
</html>
